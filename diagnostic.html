<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Diagnostic Tool</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #000;
            color: #0f0;
        }
        .section {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #0f0;
        }
        .error { color: #f00; }
        .success { color: #0f0; }
        .warning { color: #ff0; }
    </style>
</head>
<body>
    <h1>üîç Input Diagnostic Tool</h1>
    <p>This will tell us EXACTLY what's preventing inputs from working.</p>
    
    <div class="section">
        <h2>Test 1: Basic Input Test</h2>
        <input type="email" id="testInput" placeholder="Try typing here">
        <p id="test1Result">Waiting for input...</p>
    </div>
    
    <div class="section">
        <h2>Test 2: Checking Main Site Inputs</h2>
        <pre id="test2Result">Checking...</pre>
    </div>
    
    <div class="section">
        <h2>Test 3: Element Visibility Check</h2>
        <pre id="test3Result">Checking...</pre>
    </div>
    
    <div class="section">
        <h2>Test 4: CSS Computed Styles</h2>
        <pre id="test4Result">Checking...</pre>
    </div>
    
    <div class="section">
        <h2>Test 5: Event Listener Check</h2>
        <pre id="test5Result">Checking...</pre>
    </div>
    
    <script>
        // Test 1: Basic input
        document.getElementById('testInput').addEventListener('input', function(e) {
            document.getElementById('test1Result').innerHTML = '<span class="success">‚úì You can type! Value: ' + e.target.value + '</span>';
        });
        
        setTimeout(function() {
            if (document.getElementById('test1Result').textContent.includes('Waiting')) {
                document.getElementById('test1Result').innerHTML = '<span class="warning">No input detected yet. Try typing in the field above.</span>';
            }
        }, 3000);
        
        // Test 2: Check if main site inputs exist
        setTimeout(function() {
            const mainWindow = window.parent !== window ? window.parent : window;
            const emailInput = mainWindow.document.getElementById('emailInput');
            const passwordInput = mainWindow.document.getElementById('passwordInput');
            
            let result = '';
            
            if (emailInput) {
                result += '<span class="success">‚úì Email input found</span>\n';
                result += '  - Disabled: ' + emailInput.disabled + '\n';
                result += '  - ReadOnly: ' + emailInput.readOnly + '\n';
                result += '  - Display: ' + window.getComputedStyle(emailInput).display + '\n';
                result += '  - Pointer Events: ' + window.getComputedStyle(emailInput).pointerEvents + '\n';
                result += '  - Visibility: ' + window.getComputedStyle(emailInput).visibility + '\n';
                result += '  - Z-Index: ' + window.getComputedStyle(emailInput).zIndex + '\n';
            } else {
                result += '<span class="error">‚úó Email input NOT FOUND</span>\n';
            }
            
            result += '\n';
            
            if (passwordInput) {
                result += '<span class="success">‚úì Password input found</span>\n';
                result += '  - Disabled: ' + passwordInput.disabled + '\n';
                result += '  - ReadOnly: ' + passwordInput.readOnly + '\n';
                result += '  - Display: ' + window.getComputedStyle(passwordInput).display + '\n';
                result += '  - Pointer Events: ' + window.getComputedStyle(passwordInput).pointerEvents + '\n';
                result += '  - Visibility: ' + window.getComputedStyle(passwordInput).visibility + '\n';
                result += '  - Z-Index: ' + window.getComputedStyle(passwordInput).zIndex + '\n';
            } else {
                result += '<span class="error">‚úó Password input NOT FOUND</span>\n';
            }
            
            document.getElementById('test2Result').innerHTML = result;
        }, 1000);
        
        // Test 3: Check element positions and overlays
        setTimeout(function() {
            let result = 'Checking for overlaying elements...\n\n';
            
            const emailInput = document.getElementById('emailInput') || 
                              (window.parent !== window ? window.parent.document.getElementById('emailInput') : null);
            
            if (emailInput) {
                const rect = emailInput.getBoundingClientRect();
                const elementAtPoint = document.elementFromPoint(rect.left + 10, rect.top + 10);
                
                result += 'Element at input position: ' + (elementAtPoint ? elementAtPoint.tagName + '.' + elementAtPoint.className : 'null') + '\n';
                result += 'Is it the input? ' + (elementAtPoint === emailInput ? 'YES ‚úì' : 'NO ‚úó - SOMETHING IS BLOCKING IT!') + '\n';
                
                if (elementAtPoint !== emailInput && elementAtPoint) {
                    result += '\n<span class="error">BLOCKING ELEMENT FOUND:</span>\n';
                    result += '  Tag: ' + elementAtPoint.tagName + '\n';
                    result += '  Class: ' + elementAtPoint.className + '\n';
                    result += '  ID: ' + elementAtPoint.id + '\n';
                    result += '  Z-Index: ' + window.getComputedStyle(elementAtPoint).zIndex + '\n';
                }
            } else {
                result += '<span class="error">Could not find email input to test</span>\n';
            }
            
            document.getElementById('test3Result').innerHTML = result;
        }, 1500);
        
        // Test 4: CSS Analysis
        setTimeout(function() {
            const emailInput = document.getElementById('emailInput') || 
                              (window.parent !== window ? window.parent.document.getElementById('emailInput') : null);
            
            if (emailInput) {
                const styles = window.getComputedStyle(emailInput);
                let result = 'CSS Properties:\n\n';
                
                const criticalProps = [
                    'pointer-events', 'user-select', 'cursor', 'display', 
                    'visibility', 'opacity', 'z-index', 'position'
                ];
                
                criticalProps.forEach(prop => {
                    const value = styles[prop];
                    const isGood = (prop === 'pointer-events' && value === 'auto') ||
                                   (prop === 'user-select' && value !== 'none') ||
                                   (prop === 'cursor' && value === 'text') ||
                                   (prop === 'display' && value !== 'none') ||
                                   (prop === 'visibility' && value === 'visible') ||
                                   (prop === 'opacity' && parseFloat(value) > 0.5);
                    
                    result += (isGood ? '<span class="success">‚úì</span>' : '<span class="error">‚úó</span>');
                    result += ' ' + prop + ': ' + value + '\n';
                });
                
                document.getElementById('test4Result').innerHTML = result;
            } else {
                document.getElementById('test4Result').innerHTML = 'Could not find input element';
            }
        }, 2000);
        
        // Test 5: Event listeners
        setTimeout(function() {
            let result = 'Event Listener Test:\n\n';
            
            const testInput = document.getElementById('testInput');
            testInput.addEventListener('click', function() {
                result += 'Click event fired on test input ‚úì\n';
                document.getElementById('test5Result').innerHTML = result;
            });
            
            testInput.addEventListener('focus', function() {
                result += 'Focus event fired on test input ‚úì\n';
                document.getElementById('test5Result').innerHTML = result;
            });
            
            result += 'Try clicking the test input above to verify events work\n';
            document.getElementById('test5Result').innerHTML = result;
        }, 2500);
    </script>
</body>
</html>
